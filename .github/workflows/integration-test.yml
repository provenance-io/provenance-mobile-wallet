name: Flutter integration testing

on: 
  workflow_dispatch:

jobs:
  integration:
    permissions:
      contents: 'read'
      # id-token: 'write'
    runs-on: macos-latest
    steps:
    - uses: actions/checkout@v3
    - uses: subosito/flutter-action@v2
      with:
        channel: 'stable'
        architecture: x64

    - run: '${GITHUB_ACTION_PATH}/../../buildIntegrationTests.sh'

    # - id: 'auth'
    #   uses: 'google-github-actions/auth@v0'
    #   with:
    #     credentials_json: '${{ secrets.BITRISE_PROVENANCE_WALLET_API_KEY }}'

    # - name: 'Set up Cloud SDK'
    #   uses: 'google-github-actions/setup-gcloud@v0'

    # - name: 'Set Cloud Project'
    #   run: 'gcloud --quiet config set project provenance-wallet'
    
    # - name: 'Run firebase tests'
    #   run: 'gcloud firebase test android run --type instrumentation --app build/app/outputs/apk/dev/debug/app-dev-debug.apk --test build/app/outputs/apk/androidTest/dev/debug/app-dev-debug-androidTest.apk --timeout 1m --results-bucket=provenance-wallet-tests'


